<div class="white px-4 section-header">
    <h3>Marketplace</h3>
    <p class="pt-3">Hire a professional today! Find The Perfect Freelance Services For Your Business</p>

    <form (submit)="smashTheSearch()" class="form-inline md-form mr-auto mb-4">
        <input [(ngModel)]="query" name="query" class="close form-control mr-sm-2" type="text" placeholder="Search for a service"
            aria-label="Search">

        <button mdbBtn size="sm" color="blue" rounded="true" class="my-0 waves-light" mdbWavesEffect type="submit"
            (click)="smashTheSearch()">
            Search
        </button>

    </form>

</div>

<div class="container-fluid pb-5">
    <div class="py-5">
        <h2>Listing</h2>
        <!-- TODO: This isLoading Async pipe throws a random error when the template is switched 
        
        ERROR Error: ExpressionChangedAfterItHasBeenCheckedError: Expression has changed after it was checked. Previous value: 'undefined'. Current value: 'false'. It seems like the view has been created after its parent and its children have been dirty checked. Has it been created in a change detection hook?
    
        -->
        <app-marketplace-listing *ngIf="!(isLoading$ | async)" [listings]="listings$ | async"></app-marketplace-listing>

        <div #loading *ngIf="isLoading$ | async" class="d-flex justify-content-center align-items-center"
            style="margin-top: 200px">
            <div class="spinner-grow text-primary" role="status" style="width: 4rem; height: 4rem;">
                <span class="sr-only">Loading...</span>
            </div>
        </div>
    </div>
</div>