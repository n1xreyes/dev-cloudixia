function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{"0rub":function(e,t,n){"use strict";n.r(t),n.d(t,"ProfileModule",(function(){return T}));var s,c=n("tyNb"),r=n("Xd88"),i=n("/WaZ"),o=n("fXoL"),a=n("kt0X"),l=n("ofXK"),u=n("3Pt+"),b=n("dbUT"),f=function(e){return{rtl:e}},p=((s=function(){function e(t){_classCallCheck(this,e),this.store=t,this.profileUpdate=new o.n}return _createClass(e,[{key:"ngOnInit",value:function(){this.updateProfileForm=new u.i({country:new u.f(this.user.country),city:new u.f(this.user.city),street:new u.f(this.user.street),poBox:new u.f(this.user.poBox)}),this.language$=this.store.select(r.e)}},{key:"onProfileUpdate",value:function(){this.profileUpdate.emit({user:{country:this.updateProfileForm.value.country?this.updateProfileForm.value.country:"",city:this.updateProfileForm.value.city?this.updateProfileForm.value.city:"",street:this.updateProfileForm.value.street?this.updateProfileForm.value.street:"",poBox:this.updateProfileForm.value.poBox?this.updateProfileForm.value.poBox:""}})}}]),e}()).\u0275fac=function(e){return new(e||s)(o.Rb(a.h))},s.\u0275cmp=o.Lb({type:s,selectors:[["app-main-profile"]],inputs:{user:"user"},outputs:{profileUpdate:"profileUpdate"},decls:32,vars:6,consts:[[3,"ngClass"],[1,"h2-responsive","mb-4"],[3,"formGroup"],[1,"h5-responsive"],[1,"md-form"],[1,"fa","fa-address-card","prefix"],["type","text","id","form2","mdbInput","","formControlName","country",1,"form-control"],["for","form2"],["type","text","id","form2","mdbInput","","formControlName","poBox",1,"form-control"],["type","text","id","form2","mdbInput","","formControlName","city",1,"form-control"],["type","text","id","form2","mdbInput","","formControlName","street",1,"form-control"],[1,"text-right"],["type","button","mdbBtn","","color","primary",3,"click"]],template:function(e,t){1&e&&(o.Xb(0,"mdb-card"),o.Xb(1,"mdb-card-body",0),o.ic(2,"async"),o.Xb(3,"h3",1),o.Xb(4,"strong"),o.Kc(5,"Edit profile"),o.Wb(),o.Wb(),o.Xb(6,"form",2),o.Xb(7,"h5",3),o.Kc(8,"Address"),o.Wb(),o.Xb(9,"div",4),o.Sb(10,"i",5),o.Sb(11,"input",6),o.Xb(12,"label",7),o.Kc(13,"Country"),o.Wb(),o.Wb(),o.Xb(14,"div",4),o.Sb(15,"i",5),o.Sb(16,"input",8),o.Xb(17,"label",7),o.Kc(18,"P.O. Box"),o.Wb(),o.Wb(),o.Xb(19,"div",4),o.Sb(20,"i",5),o.Sb(21,"input",9),o.Xb(22,"label",7),o.Kc(23,"City"),o.Wb(),o.Wb(),o.Xb(24,"div",4),o.Sb(25,"i",5),o.Sb(26,"input",10),o.Xb(27,"label",7),o.Kc(28,"Street Number and Address"),o.Wb(),o.Wb(),o.Xb(29,"div",11),o.Xb(30,"button",12),o.fc("click",(function(){return t.onProfileUpdate()})),o.Kc(31,"Update profile"),o.Wb(),o.Wb(),o.Wb(),o.Wb(),o.Wb()),2&e&&(o.Cb(1),o.nc("ngClass",o.sc(4,f,"ar"===o.jc(2,2,t.language$))),o.Cb(5),o.nc("formGroup",t.updateProfileForm))},directives:[b.F,b.E,l.q,u.G,u.r,u.j,u.c,b.N,u.q,u.h,b.D],pipes:[l.b],styles:[".rtl[_ngcontent-%COMP%]   div.md-form[_ngcontent-%COMP%]   .prefix[_ngcontent-%COMP%] ~ input[_ngcontent-%COMP%]{margin-right:2.5rem;width:calc(100% - 5rem)}"],changeDetection:0}),s),h=n("bmSC");function d(e,t){if(1&e&&o.Sb(0,"img",8),2&e){var n=o.hc(2);o.oc("src",n.userProfile.photoUrl,o.Dc)}}function m(e,t){if(1&e){var n=o.Yb();o.Xb(0,"mdb-card-body"),o.Xb(1,"div",1),o.Xb(2,"div",2),o.Ic(3,d,1,1,"img",3),o.Wb(),o.Xb(4,"app-image-upload",4),o.fc("photoUrlGenerated",(function(e){return o.Bc(n),o.hc().setUserPhotoUrl(e)})),o.Wb(),o.Xb(5,"h3",5),o.Kc(6),o.Wb(),o.Xb(7,"a",6),o.fc("click",(function(){return o.Bc(n),o.hc().onLogout()})),o.Sb(8,"i",7),o.Kc(9," Logout "),o.Wb(),o.Wb(),o.Wb()}if(2&e){var s=o.hc();o.Cb(3),o.nc("ngIf",s.userProfile.photoUrl),o.Cb(1),o.nc("userInfo",s.user)("displayUploadButton",!0),o.Cb(2),o.Mc(" ",(null==s.userProfile?null:s.userProfile.displayName)||"Anonymous user"," ")}}var g,v=((g=function(){function e(t){_classCallCheck(this,e),this.store=t,this.logout=new o.n,this.photoUrlUpdated=new o.n}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.store.pipe(Object(a.q)(r.f)).subscribe((function(t){t&&(e.user=t)}))}},{key:"onLogout",value:function(){this.logout.emit(this.user)}},{key:"setUserPhotoUrl",value:function(e){var t=Object.assign(Object.assign({},this.userProfile),{photoUrl:e});this.photoUrlUpdated.emit({userProfile:t})}}]),e}()).\u0275fac=function(e){return new(e||g)(o.Rb(a.h))},g.\u0275cmp=o.Lb({type:g,selectors:[["app-profile-user"]],inputs:{user:"user",userProfile:"userProfile"},outputs:{logout:"logout",photoUrlUpdated:"photoUrlUpdated"},decls:2,vars:1,consts:[[4,"ngIf"],[1,"text-center"],[1,"avatar",2,"margin-top","-60px"],["height","96","width","96","class","rounded-circle z-depth-0","alt","avatar image",3,"src",4,"ngIf"],[3,"userInfo","displayUploadButton","photoUrlGenerated"],[1,"mt-4"],["mdbBtn","","color","primary",1,"mt-3",3,"click"],[1,"fa","fa-sign-out"],["height","96","width","96","alt","avatar image",1,"rounded-circle","z-depth-0",3,"src"]],template:function(e,t){1&e&&(o.Xb(0,"mdb-card"),o.Ic(1,m,10,4,"mdb-card-body",0),o.Wb()),2&e&&(o.Cb(1),o.nc("ngIf",t.userProfile))},directives:[b.F,l.t,b.E,h.a,b.D],styles:[""],changeDetection:0}),g);function y(e,t){if(1&e){var n=o.Yb();o.Xb(0,"app-profile-user",10),o.fc("logout",(function(e){return o.Bc(n),o.hc(2).logoutUser(e)}))("photoUrlUpdated",(function(e){return o.Bc(n),o.hc(2).updateProfile(e)})),o.ic(1,"async"),o.ic(2,"async"),o.Wb()}if(2&e){var s=o.hc(2);o.nc("userProfile",o.jc(1,2,s.userProfile$))("user",o.jc(2,4,s.user$))}}function C(e,t){if(1&e){var n=o.Yb();o.Xb(0,"div",4),o.Xb(1,"div",5),o.Xb(2,"div",6),o.Ic(3,y,3,6,"app-profile-user",7),o.ic(4,"async"),o.Wb(),o.Xb(5,"div",8),o.Xb(6,"app-main-profile",9),o.fc("profileUpdate",(function(e){return o.Bc(n),o.hc().updateProfile(e)})),o.ic(7,"async"),o.Wb(),o.Wb(),o.Wb(),o.Wb()}if(2&e){var s=o.hc();o.Cb(3),o.nc("ngIf",o.jc(4,2,s.userProfile$)),o.Cb(3),o.nc("user",o.jc(7,4,s.user$))}}function X(e,t){1&e&&(o.Xb(0,"div",11),o.Xb(1,"div",12),o.Xb(2,"span",13),o.Kc(3,"Loading..."),o.Wb(),o.Wb(),o.Wb())}var W,P=((W=function(){function e(t){_classCallCheck(this,e),this.store=t}return _createClass(e,[{key:"ngOnInit",value:function(){this.user$=this.store.select(r.f),this.userProfile$=this.store.select(r.i)}},{key:"updateProfile",value:function(e){this.store.dispatch(new i.v(e))}},{key:"logoutUser",value:function(e){this.store.dispatch(new i.r({user:e}))}}]),e}()).\u0275fac=function(e){return new(e||W)(o.Rb(a.h))},W.\u0275cmp=o.Lb({type:W,selectors:[["app-profile"]],decls:9,vars:6,consts:[[1,"white","px-4","section-header"],[1,"grey-text","pt-3"],["class","container py-5",4,"ngIf"],["class","d-flex justify-content-center align-items-center","style","margin-top: 200px",4,"ngIf"],[1,"container","py-5"],[1,"row","mx-auto","py-5"],[1,"col-md-4","mt-3"],[3,"userProfile","user","logout","photoUrlUpdated",4,"ngIf"],[1,"col-md-8","mt-3"],[3,"user","profileUpdate"],[3,"userProfile","user","logout","photoUrlUpdated"],[1,"d-flex","justify-content-center","align-items-center",2,"margin-top","200px"],["role","status",1,"spinner-grow","text-primary",2,"width","4rem","height","4rem"],[1,"sr-only"]],template:function(e,t){1&e&&(o.Xb(0,"div",0),o.Xb(1,"h3"),o.Kc(2,"Profile"),o.Wb(),o.Xb(3,"p",1),o.Kc(4,"Change your personal information"),o.Wb(),o.Wb(),o.Ic(5,C,8,6,"div",2),o.ic(6,"async"),o.Ic(7,X,4,0,"div",3),o.ic(8,"async")),2&e&&(o.Cb(5),o.nc("ngIf",o.jc(6,2,t.user$)),o.Cb(2),o.nc("ngIf",!o.jc(8,4,t.user$)))},directives:[l.t,p,v],pipes:[l.b],styles:[""]}),W),w=n("lJxs"),k=n("sYmb");function I(e,t){if(1&e){var n=o.Yb();o.Xb(0,"div"),o.Xb(1,"mdb-card",1),o.Xb(2,"a",2),o.fc("click",(function(){o.Bc(n);var e=t.$implicit;return o.hc().chatSelected(e)})),o.Xb(3,"mdb-card-body"),o.Xb(4,"mdb-card-text"),o.Sb(5,"label"),o.Kc(6),o.Wb(),o.Xb(7,"mdb-card-text"),o.Kc(8),o.ic(9,"date"),o.Wb(),o.Xb(10,"mdb-card-title"),o.Sb(11,"label"),o.Kc(12),o.Wb(),o.Wb(),o.Wb(),o.Wb(),o.Wb()}if(2&e){var s=t.$implicit;o.Cb(6),o.Mc(" ",s.message," "),o.Cb(2),o.Mc(" ",o.kc(9,3,s.timestamp.toDate().getTime(),"short")," "),o.Cb(4),o.Mc(" ",s.receiverId," ")}}var U,x=((U=function(){function e(){_classCallCheck(this,e),this.onChatSelect=new o.n}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"chatSelected",value:function(e){this.onChatSelect.emit(e)}}]),e}()).\u0275fac=function(e){return new(e||U)},U.\u0275cmp=o.Lb({type:U,selectors:[["app-messages-chat-list"]],inputs:{chats:"chats"},outputs:{onChatSelect:"onChatSelect"},decls:3,vars:1,consts:[[4,"ngFor","ngForOf"],[1,"mb-4","col-sm-8"],[3,"click"]],template:function(e,t){1&e&&(o.Xb(0,"h2"),o.Kc(1,"Chat List"),o.Wb(),o.Ic(2,I,13,6,"div",0)),2&e&&(o.Cb(2),o.nc("ngForOf",t.chats))},directives:[l.s,b.F,b.E,b.J,b.K],pipes:[l.f],styles:[""]}),U);function S(e,t){if(1&e&&(o.Xb(0,"div"),o.Kc(1),o.Sb(2,"br"),o.Kc(3),o.Sb(4,"br"),o.Kc(5),o.ic(6,"date"),o.Sb(7,"br"),o.Sb(8,"br"),o.Wb()),2&e){var n=t.$implicit;o.Cb(1),o.Mc(" ",n.sender," "),o.Cb(2),o.Mc(" ",n.message," "),o.Cb(2),o.Mc(" ",o.kc(6,3,n.timestamp.toDate().getTime(),"short")," ")}}function M(e,t){if(1&e){var n=o.Yb();o.Xb(0,"div"),o.Ic(1,S,9,6,"div",1),o.Sb(2,"hr"),o.Xb(3,"textarea",2),o.fc("ngModelChange",(function(e){return o.Bc(n),o.hc().messageText=e})),o.Wb(),o.Xb(4,"button",3),o.fc("click",(function(){return o.Bc(n),o.hc().sendMessage()})),o.Kc(5,"Send"),o.Wb(),o.Wb()}if(2&e){var s=o.hc();o.Cb(1),o.nc("ngForOf",s.chatMessages),o.Cb(2),o.nc("ngModel",s.messageText)}}function K(e,t){1&e&&(o.Xb(0,"div"),o.Kc(1," Please select or start a new chat.\n"),o.Wb())}var _,O,F,j,B=((_=function(){function e(t){_classCallCheck(this,e),this.store=t,this.messageText=""}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"sendMessage",value:function(){this.messageText.trim()&&(this.store.dispatch(new i.s(this.chatData.receiverId,this.messageText,this.chatData.chatId)),this.messageText="")}}]),e}()).\u0275fac=function(e){return new(e||_)(o.Rb(a.h))},_.\u0275cmp=o.Lb({type:_,selectors:[["app-messages-chat-room"]],inputs:{chatMessages:"chatMessages",chatData:"chatData"},decls:3,vars:2,consts:[[4,"ngIf"],[4,"ngFor","ngForOf"],[3,"ngModel","ngModelChange"],[3,"click"]],template:function(e,t){1&e&&(o.Xb(0,"mdb-card"),o.Ic(1,M,6,2,"div",0),o.Ic(2,K,2,0,"div",0),o.Wb()),2&e&&(o.Cb(1),o.nc("ngIf",t.chatMessages),o.Cb(1),o.nc("ngIf",!t.chatMessages))},directives:[b.F,l.t,l.s,u.c,u.q,u.t],pipes:[l.f],styles:[""]}),_),$=[{path:"",component:P},{path:"messages",component:(O=function(){function e(t){_classCallCheck(this,e),this.store=t}return _createClass(e,[{key:"ngOnInit",value:function(){this.chats$=this.store.select(r.h)}},{key:"getChatMessages",value:function(e){var t=this;this.chatMessages$=this.store.select(r.g).pipe(Object(w.a)((function(n){if(n&&n[e])return n[e];t.store.dispatch(new i.f(e))})))}},{key:"onChatSelect",value:function(e){this.selectedChat=e,this.getChatMessages(e.chatId)}}]),e}(),O.\u0275fac=function(e){return new(e||O)(o.Rb(a.h))},O.\u0275cmp=o.Lb({type:O,selectors:[["app-messages"]],decls:13,vars:7,consts:[[1,"white","px-4","section-header"],["translate",""],["translate","",1,"pt-3"],[1,"pt-1","pb-5"],[1,"row","mx-auto","py-5"],[1,"col-sm-12","col-md-6","col-lg-6","mt-3"],[3,"chats","onChatSelect"],[3,"chatMessages","chatData"]],template:function(e,t){1&e&&(o.Xb(0,"div",0),o.Xb(1,"h3",1),o.Kc(2,"component.messages.header"),o.Wb(),o.Xb(3,"p",2),o.Kc(4,"component.messages.subHeading"),o.Wb(),o.Wb(),o.Xb(5,"div",3),o.Xb(6,"div",4),o.Xb(7,"div",5),o.Xb(8,"app-messages-chat-list",6),o.fc("onChatSelect",(function(e){return t.onChatSelect(e)})),o.ic(9,"async"),o.Wb(),o.Wb(),o.Xb(10,"div",5),o.Sb(11,"app-messages-chat-room",7),o.ic(12,"async"),o.Wb(),o.Wb(),o.Wb()),2&e&&(o.Cb(8),o.nc("chats",o.jc(9,3,t.chats$)),o.Cb(3),o.nc("chatMessages",o.jc(12,5,t.chatMessages$))("chatData",t.selectedChat))},directives:[k.a,x,B],pipes:[l.b],styles:[""]}),O)}],D=((F=function e(){_classCallCheck(this,e)}).\u0275mod=o.Pb({type:F}),F.\u0275inj=o.Ob({factory:function(e){return new(e||F)},imports:[[c.g.forChild($)],c.g]}),F),L=n("PCNd"),T=((j=function e(){_classCallCheck(this,e)}).\u0275mod=o.Pb({type:j}),j.\u0275inj=o.Ob({factory:function(e){return new(e||j)},imports:[[D,L.a]]}),j)}}]);