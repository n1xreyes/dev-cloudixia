(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{"0rub":function(t,e,s){"use strict";s.r(e),s.d(e,"ProfileModule",(function(){return F}));var c=s("tyNb"),r=s("Xd88"),o=s("/WaZ"),n=s("fXoL"),i=s("kt0X"),a=s("ofXK"),b=s("3Pt+"),l=s("dbUT");const u=function(t){return{rtl:t}};let p=(()=>{class t{constructor(t){this.store=t,this.profileUpdate=new n.n}ngOnInit(){this.updateProfileForm=new b.i({country:new b.f(this.user.country),city:new b.f(this.user.city),street:new b.f(this.user.street),poBox:new b.f(this.user.poBox)}),this.language$=this.store.select(r.e)}onProfileUpdate(){this.profileUpdate.emit({user:{country:this.updateProfileForm.value.country?this.updateProfileForm.value.country:"",city:this.updateProfileForm.value.city?this.updateProfileForm.value.city:"",street:this.updateProfileForm.value.street?this.updateProfileForm.value.street:"",poBox:this.updateProfileForm.value.poBox?this.updateProfileForm.value.poBox:""}})}}return t.\u0275fac=function(e){return new(e||t)(n.Rb(i.h))},t.\u0275cmp=n.Lb({type:t,selectors:[["app-main-profile"]],inputs:{user:"user"},outputs:{profileUpdate:"profileUpdate"},decls:32,vars:6,consts:[[3,"ngClass"],[1,"h2-responsive","mb-4"],[3,"formGroup"],[1,"h5-responsive"],[1,"md-form"],[1,"fa","fa-address-card","prefix"],["type","text","id","form2","mdbInput","","formControlName","country",1,"form-control"],["for","form2"],["type","text","id","form2","mdbInput","","formControlName","poBox",1,"form-control"],["type","text","id","form2","mdbInput","","formControlName","city",1,"form-control"],["type","text","id","form2","mdbInput","","formControlName","street",1,"form-control"],[1,"text-right"],["type","button","mdbBtn","","color","primary",3,"click"]],template:function(t,e){1&t&&(n.Xb(0,"mdb-card"),n.Xb(1,"mdb-card-body",0),n.ic(2,"async"),n.Xb(3,"h3",1),n.Xb(4,"strong"),n.Kc(5,"Edit profile"),n.Wb(),n.Wb(),n.Xb(6,"form",2),n.Xb(7,"h5",3),n.Kc(8,"Address"),n.Wb(),n.Xb(9,"div",4),n.Sb(10,"i",5),n.Sb(11,"input",6),n.Xb(12,"label",7),n.Kc(13,"Country"),n.Wb(),n.Wb(),n.Xb(14,"div",4),n.Sb(15,"i",5),n.Sb(16,"input",8),n.Xb(17,"label",7),n.Kc(18,"P.O. Box"),n.Wb(),n.Wb(),n.Xb(19,"div",4),n.Sb(20,"i",5),n.Sb(21,"input",9),n.Xb(22,"label",7),n.Kc(23,"City"),n.Wb(),n.Wb(),n.Xb(24,"div",4),n.Sb(25,"i",5),n.Sb(26,"input",10),n.Xb(27,"label",7),n.Kc(28,"Street Number and Address"),n.Wb(),n.Wb(),n.Xb(29,"div",11),n.Xb(30,"button",12),n.fc("click",(function(){return e.onProfileUpdate()})),n.Kc(31,"Update profile"),n.Wb(),n.Wb(),n.Wb(),n.Wb(),n.Wb()),2&t&&(n.Cb(1),n.nc("ngClass",n.sc(4,u,"ar"===n.jc(2,2,e.language$))),n.Cb(5),n.nc("formGroup",e.updateProfileForm))},directives:[l.F,l.E,a.q,b.G,b.r,b.j,b.c,l.N,b.q,b.h,l.D],pipes:[a.b],styles:[".rtl[_ngcontent-%COMP%]   div.md-form[_ngcontent-%COMP%]   .prefix[_ngcontent-%COMP%] ~ input[_ngcontent-%COMP%]{margin-right:2.5rem;width:calc(100% - 5rem)}"],changeDetection:0}),t})();var d=s("bmSC");function f(t,e){if(1&t&&n.Sb(0,"img",8),2&t){const t=n.hc(2);n.oc("src",t.userProfile.photoUrl,n.Dc)}}function h(t,e){if(1&t){const t=n.Yb();n.Xb(0,"mdb-card-body"),n.Xb(1,"div",1),n.Xb(2,"div",2),n.Ic(3,f,1,1,"img",3),n.Wb(),n.Xb(4,"app-image-upload",4),n.fc("photoUrlGenerated",(function(e){return n.Bc(t),n.hc().setUserPhotoUrl(e)})),n.Wb(),n.Xb(5,"h3",5),n.Kc(6),n.Wb(),n.Xb(7,"a",6),n.fc("click",(function(){return n.Bc(t),n.hc().onLogout()})),n.Sb(8,"i",7),n.Kc(9," Logout "),n.Wb(),n.Wb(),n.Wb()}if(2&t){const t=n.hc();n.Cb(3),n.nc("ngIf",t.userProfile.photoUrl),n.Cb(1),n.nc("userInfo",t.user)("displayUploadButton",!0),n.Cb(2),n.Mc(" ",(null==t.userProfile?null:t.userProfile.displayName)||"Anonymous user"," ")}}let m=(()=>{class t{constructor(t){this.store=t,this.logout=new n.n,this.photoUrlUpdated=new n.n}ngOnInit(){this.store.pipe(Object(i.q)(r.f)).subscribe(t=>{t&&(this.user=t)})}onLogout(){this.logout.emit(this.user)}setUserPhotoUrl(t){const e=Object.assign(Object.assign({},this.userProfile),{photoUrl:t});this.photoUrlUpdated.emit({userProfile:e})}}return t.\u0275fac=function(e){return new(e||t)(n.Rb(i.h))},t.\u0275cmp=n.Lb({type:t,selectors:[["app-profile-user"]],inputs:{user:"user",userProfile:"userProfile"},outputs:{logout:"logout",photoUrlUpdated:"photoUrlUpdated"},decls:2,vars:1,consts:[[4,"ngIf"],[1,"text-center"],[1,"avatar",2,"margin-top","-60px"],["height","96","width","96","class","rounded-circle z-depth-0","alt","avatar image",3,"src",4,"ngIf"],[3,"userInfo","displayUploadButton","photoUrlGenerated"],[1,"mt-4"],["mdbBtn","","color","primary",1,"mt-3",3,"click"],[1,"fa","fa-sign-out"],["height","96","width","96","alt","avatar image",1,"rounded-circle","z-depth-0",3,"src"]],template:function(t,e){1&t&&(n.Xb(0,"mdb-card"),n.Ic(1,h,10,4,"mdb-card-body",0),n.Wb()),2&t&&(n.Cb(1),n.nc("ngIf",e.userProfile))},directives:[l.F,a.t,l.E,d.a,l.D],styles:[""],changeDetection:0}),t})();function g(t,e){if(1&t){const t=n.Yb();n.Xb(0,"app-profile-user",10),n.fc("logout",(function(e){return n.Bc(t),n.hc(2).logoutUser(e)}))("photoUrlUpdated",(function(e){return n.Bc(t),n.hc(2).updateProfile(e)})),n.ic(1,"async"),n.ic(2,"async"),n.Wb()}if(2&t){const t=n.hc(2);n.nc("userProfile",n.jc(1,2,t.userProfile$))("user",n.jc(2,4,t.user$))}}function y(t,e){if(1&t){const t=n.Yb();n.Xb(0,"div",4),n.Xb(1,"div",5),n.Xb(2,"div",6),n.Ic(3,g,3,6,"app-profile-user",7),n.ic(4,"async"),n.Wb(),n.Xb(5,"div",8),n.Xb(6,"app-main-profile",9),n.fc("profileUpdate",(function(e){return n.Bc(t),n.hc().updateProfile(e)})),n.ic(7,"async"),n.Wb(),n.Wb(),n.Wb(),n.Wb()}if(2&t){const t=n.hc();n.Cb(3),n.nc("ngIf",n.jc(4,2,t.userProfile$)),n.Cb(3),n.nc("user",n.jc(7,4,t.user$))}}function v(t,e){1&t&&(n.Xb(0,"div",11),n.Xb(1,"div",12),n.Xb(2,"span",13),n.Kc(3,"Loading..."),n.Wb(),n.Wb(),n.Wb())}let X=(()=>{class t{constructor(t){this.store=t}ngOnInit(){this.user$=this.store.select(r.f),this.userProfile$=this.store.select(r.i)}updateProfile(t){this.store.dispatch(new o.v(t))}logoutUser(t){this.store.dispatch(new o.r({user:t}))}}return t.\u0275fac=function(e){return new(e||t)(n.Rb(i.h))},t.\u0275cmp=n.Lb({type:t,selectors:[["app-profile"]],decls:9,vars:6,consts:[[1,"white","px-4","section-header"],[1,"grey-text","pt-3"],["class","container py-5",4,"ngIf"],["class","d-flex justify-content-center align-items-center","style","margin-top: 200px",4,"ngIf"],[1,"container","py-5"],[1,"row","mx-auto","py-5"],[1,"col-md-4","mt-3"],[3,"userProfile","user","logout","photoUrlUpdated",4,"ngIf"],[1,"col-md-8","mt-3"],[3,"user","profileUpdate"],[3,"userProfile","user","logout","photoUrlUpdated"],[1,"d-flex","justify-content-center","align-items-center",2,"margin-top","200px"],["role","status",1,"spinner-grow","text-primary",2,"width","4rem","height","4rem"],[1,"sr-only"]],template:function(t,e){1&t&&(n.Xb(0,"div",0),n.Xb(1,"h3"),n.Kc(2,"Profile"),n.Wb(),n.Xb(3,"p",1),n.Kc(4,"Change your personal information"),n.Wb(),n.Wb(),n.Ic(5,y,8,6,"div",2),n.ic(6,"async"),n.Ic(7,v,4,0,"div",3),n.ic(8,"async")),2&t&&(n.Cb(5),n.nc("ngIf",n.jc(6,2,e.user$)),n.Cb(2),n.nc("ngIf",!n.jc(8,4,e.user$)))},directives:[a.t,p,m],pipes:[a.b],styles:[""]}),t})();var W=s("lJxs"),C=s("sYmb");function P(t,e){if(1&t){const t=n.Yb();n.Xb(0,"div"),n.Xb(1,"mdb-card",1),n.Xb(2,"a",2),n.fc("click",(function(){n.Bc(t);const s=e.$implicit;return n.hc().chatSelected(s)})),n.Xb(3,"mdb-card-body"),n.Xb(4,"mdb-card-text"),n.Sb(5,"label"),n.Kc(6),n.Wb(),n.Xb(7,"mdb-card-text"),n.Kc(8),n.ic(9,"date"),n.Wb(),n.Xb(10,"mdb-card-title"),n.Sb(11,"label"),n.Kc(12),n.Wb(),n.Wb(),n.Wb(),n.Wb(),n.Wb()}if(2&t){const t=e.$implicit;n.Cb(6),n.Mc(" ",t.message," "),n.Cb(2),n.Mc(" ",n.kc(9,3,t.timestamp.toDate().getTime(),"short")," "),n.Cb(4),n.Mc(" ",t.receiverId," ")}}let I=(()=>{class t{constructor(){this.onChatSelect=new n.n}ngOnInit(){}chatSelected(t){this.onChatSelect.emit(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=n.Lb({type:t,selectors:[["app-messages-chat-list"]],inputs:{chats:"chats"},outputs:{onChatSelect:"onChatSelect"},decls:3,vars:1,consts:[[4,"ngFor","ngForOf"],[1,"mb-4","col-sm-8"],[3,"click"]],template:function(t,e){1&t&&(n.Xb(0,"h2"),n.Kc(1,"Chat List"),n.Wb(),n.Ic(2,P,13,6,"div",0)),2&t&&(n.Cb(2),n.nc("ngForOf",e.chats))},directives:[a.s,l.F,l.E,l.J,l.K],pipes:[a.f],styles:[""]}),t})();function w(t,e){if(1&t&&(n.Xb(0,"div"),n.Kc(1),n.Sb(2,"br"),n.Kc(3),n.Sb(4,"br"),n.Kc(5),n.ic(6,"date"),n.Sb(7,"br"),n.Sb(8,"br"),n.Wb()),2&t){const t=e.$implicit;n.Cb(1),n.Mc(" ",t.sender," "),n.Cb(2),n.Mc(" ",t.message," "),n.Cb(2),n.Mc(" ",n.kc(6,3,t.timestamp.toDate().getTime(),"short")," ")}}function U(t,e){if(1&t){const t=n.Yb();n.Xb(0,"div"),n.Ic(1,w,9,6,"div",1),n.Sb(2,"hr"),n.Xb(3,"textarea",2),n.fc("ngModelChange",(function(e){return n.Bc(t),n.hc().messageText=e})),n.Wb(),n.Xb(4,"button",3),n.fc("click",(function(){return n.Bc(t),n.hc().sendMessage()})),n.Kc(5,"Send"),n.Wb(),n.Wb()}if(2&t){const t=n.hc();n.Cb(1),n.nc("ngForOf",t.chatMessages),n.Cb(2),n.nc("ngModel",t.messageText)}}function x(t,e){1&t&&(n.Xb(0,"div"),n.Kc(1," Please select or start a new chat.\n"),n.Wb())}let S=(()=>{class t{constructor(t){this.store=t,this.messageText=""}ngOnInit(){}sendMessage(){this.messageText.trim()&&(this.store.dispatch(new o.s(this.chatData.receiverId,this.messageText,this.chatData.chatId)),this.messageText="")}}return t.\u0275fac=function(e){return new(e||t)(n.Rb(i.h))},t.\u0275cmp=n.Lb({type:t,selectors:[["app-messages-chat-room"]],inputs:{chatMessages:"chatMessages",chatData:"chatData"},decls:3,vars:2,consts:[[4,"ngIf"],[4,"ngFor","ngForOf"],[3,"ngModel","ngModelChange"],[3,"click"]],template:function(t,e){1&t&&(n.Xb(0,"mdb-card"),n.Ic(1,U,6,2,"div",0),n.Ic(2,x,2,0,"div",0),n.Wb()),2&t&&(n.Cb(1),n.nc("ngIf",e.chatMessages),n.Cb(1),n.nc("ngIf",!e.chatMessages))},directives:[l.F,a.t,a.s,b.c,b.q,b.t],pipes:[a.f],styles:[""]}),t})();const M=[{path:"",component:X},{path:"messages",component:(()=>{class t{constructor(t){this.store=t}ngOnInit(){this.chats$=this.store.select(r.h)}getChatMessages(t){this.chatMessages$=this.store.select(r.g).pipe(Object(W.a)(e=>{if(e&&e[t])return e[t];this.store.dispatch(new o.f(t))}))}onChatSelect(t){this.selectedChat=t,this.getChatMessages(t.chatId)}}return t.\u0275fac=function(e){return new(e||t)(n.Rb(i.h))},t.\u0275cmp=n.Lb({type:t,selectors:[["app-messages"]],decls:13,vars:7,consts:[[1,"white","px-4","section-header"],["translate",""],["translate","",1,"pt-3"],[1,"pt-1","pb-5"],[1,"row","mx-auto","py-5"],[1,"col-sm-12","col-md-6","col-lg-6","mt-3"],[3,"chats","onChatSelect"],[3,"chatMessages","chatData"]],template:function(t,e){1&t&&(n.Xb(0,"div",0),n.Xb(1,"h3",1),n.Kc(2,"component.messages.header"),n.Wb(),n.Xb(3,"p",2),n.Kc(4,"component.messages.subHeading"),n.Wb(),n.Wb(),n.Xb(5,"div",3),n.Xb(6,"div",4),n.Xb(7,"div",5),n.Xb(8,"app-messages-chat-list",6),n.fc("onChatSelect",(function(t){return e.onChatSelect(t)})),n.ic(9,"async"),n.Wb(),n.Wb(),n.Xb(10,"div",5),n.Sb(11,"app-messages-chat-room",7),n.ic(12,"async"),n.Wb(),n.Wb(),n.Wb()),2&t&&(n.Cb(8),n.nc("chats",n.jc(9,3,e.chats$)),n.Cb(3),n.nc("chatMessages",n.jc(12,5,e.chatMessages$))("chatData",e.selectedChat))},directives:[C.a,I,S],pipes:[a.b],styles:[""]}),t})()}];let K=(()=>{class t{}return t.\u0275mod=n.Pb({type:t}),t.\u0275inj=n.Ob({factory:function(e){return new(e||t)},imports:[[c.g.forChild(M)],c.g]}),t})();var O=s("PCNd");let F=(()=>{class t{}return t.\u0275mod=n.Pb({type:t}),t.\u0275inj=n.Ob({factory:function(e){return new(e||t)},imports:[[K,O.a]]}),t})()}}]);